
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
     <!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-13075446-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-13075446-1');
</script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>پیاده سازی یک سیستم کش ساده با چند خط پی اچ پی</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="author" content="مجتبی بنائی" />
    <meta name="description" content="پیاده سازی یک سیستم کش ساده با چند خط پی اچ پی" />
    <meta name="keywords" content="تخصصی‌نرم‌افزار, تجربیات, تخصصی, سایت, وب">
<!-- Facebook and Twitter integration -->
<meta property="og:site_name" content="سایت شخصی سید مجتبی بنائی"/>
<meta property="og:title" content="پیاده سازی یک سیستم کش ساده با چند خط پی اچ پی"/>
<meta property="og:description" content="پیاده سازی یک سیستم کش ساده با چند خط پی اچ پی"/>
<meta property="og:url" content="http://banaie.ir/blog/2011/10/پیاده-سازی-یک-سیستم-کش-ساده-با-چند-خط-پی-اچ-پی.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2011-10-29 00:00:00+03:30"/>
<meta property="article:modified_time" content="2018-08-01 00:00:00+04:30"/>
<meta property="article:author" content="http://banaie.ir/author/mjtby-bnyy.html">
<meta property="article:section" content="روزنوشت"/>
    <meta property="article:tag" content="تخصصی‌نرم‌افزار"/>
    <meta property="article:tag" content="تجربیات"/>
    <meta property="article:tag" content="تخصصی"/>
    <meta property="article:tag" content="سایت"/>
    <meta property="article:tag" content="وب"/>
    <meta property="og:image" content="http://banaie.ir//images/static/diary.jpg">

    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700" rel="stylesheet">

    <!-- Animate.css -->
    <link rel="stylesheet" href="http://banaie.ir/theme/css/animate.css">
    <!-- Icomoon Icon Fonts-->
    <link rel="stylesheet" href="http://banaie.ir/theme/css/icomoon.css">
    <!-- Bootstrap  -->
    <link rel="stylesheet" href="http://banaie.ir/theme/css/bootstrap.css">
    <!-- Flexslider  -->
    <link rel="stylesheet" href="http://banaie.ir/theme/css/flexslider.css">
    <!-- Theme style  -->
    <link rel="stylesheet" href="http://banaie.ir/theme/css/style.css">
    <!-- Custom style  -->
    <link rel="stylesheet" href="http://banaie.ir/theme/css/custom.css">
    <!-- pygments code highlight -->
    <link rel="stylesheet" href="http://banaie.ir/theme/css/pygments.css">
    <!-- tipue search -->
    <link rel="stylesheet" href="http://banaie.ir/theme/tipuesearch/css/tipuesearch.css">

    <!-- Modernizr JS -->
    <script src="http://banaie.ir/theme/js/modernizr-2.6.2.min.js"></script>
    <!-- FOR IE9 below -->
    <!--[if lt IE 9]>
    <script src="/theme/js/respond.min.js"></script>
    <![endif]-->
        <link href="http://banaie.ir/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="سایت شخصی سید مجتبی بنائی Atom">



    </head>
    <body>
	<!-- Google Tag Manager (noscript) -->
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TZP883X"
	height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<!-- End Google Tag Manager (noscript) -->
    <div id="fh5co-page">
        <a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle"><i></i></a>
        <aside id="fh5co-aside" role="complementary" class="border js-fullheight">

            <nav class="fh5co-main-menu" role="navigation">
    <ul class="language-navigation">
        <li>
                <a class="lang-active" href="http://banaie.ir/">fa</a>
                <a href="http://banaie.ir/en/">en</a>
        </li>
    </ul>
            </nav>
            <div class="clearfix"></div>
            <h1  id="fh5co-logo">
                <a href="http://banaie.ir/index.html">
                    <img src="/images/logo.jpg" />
                </a>
            </h1>
            <nav class="fh5co-main-menu" role="navigation">
<ul>
    <!-- home link -->
    <li><a href="http://banaie.ir/">Home</a></li>

    <!-- page links -->
            <li><a href="http://banaie.ir/pages/درباره-من.html">درباره من</a></li>

    <!-- categories -->
        <li><a href="http://banaie.ir/categories.html">Categories</a></li>

    <!-- tags -->
        <li><a href="http://banaie.ir/tags.html">Tags</a></li>

    <!-- additional menu items from config -->
        <!-- <li class="nav-title">Misc</li> -->
            <li><a href="http://banaie.ir/archives.html">Archive</a></li>
            <li><a href="http://banaie.ir/contact.html">Contact</a></li>

</ul><ul><li><form id="searchform" action="http://banaie.ir/search.html">
    <input id="tipue_search_input" data-siteurl="http://banaie.ir" type="text" size="60" class="form-control search-field" name="q">

    <button type="submit" class="btn btn-primary search-submit"><i class="icon-search4"></i></button>
</form></li></ul>

            </nav>

<ul id="social">
            <li><a href="https://www.github.com/smbanaie" alt="Github"><i class="icon-github"></i></a></li>

            <li><a href="https://www.facebook.com/smbanaie" alt="Facebook"><i class="icon-facebook2"></i></a></li>

            <li><a href="https://www.twitter.com/smbanaie" alt="Twitter"><i class="icon-twitter2"></i></a></li>

            <li><a href="https://www.linkedin.com/in/smbanaie/" alt="Linkedin"><i class="icon-linkedin2"></i></a></li>

</ul>
        </aside>

        <div id="fh5co-main">

    <div class="fh5co-narrow-content article-content">
        <h1 class="fh5co-heading-colored">پیاده سازی یک سیستم کش ساده با چند خط پی اچ پی</h1>

        <div>by
                <a href="author/mjtby-bnyy.html">مجتبی بنائی</a> - شنبه 07 آبان 1390
        - گروه : روزنوشت - مشاهده : 0</div>
        <div>
        
        </div>
            <div><span>برچسب‌ها: </span>
                    <span><a href="http://banaie.ir/tag/tkhssynrmfzr.html">#تخصصی‌نرم‌افزار</a> </span>
                    <span><a href="http://banaie.ir/tag/tjrbyt.html">#تجربیات</a> </span>
                    <span><a href="http://banaie.ir/tag/tkhssy.html">#تخصصی</a> </span>
                    <span><a href="http://banaie.ir/tag/syt.html">#سایت</a> </span>
                    <span><a href="http://banaie.ir/tag/wb.html">#وب</a> </span>
            </div>

        <div class="animate-box" data-animate-effect="fadeInLeft">
            <p class="animate-box" data-animate-effect="fadeInLeft"><p>s: تجربیات | تخصصی | سایت | وب همانطور که میدانید صفحات وب داینامیک مانند صفحات نوشته شده با PHP و ASP با هر بار فراخوانی یکبار اجرا شده و نتیجه اجرا به بازدیدکننده سایت ارسال می شود. برای افزایش سرعت سایت ، معمولاً از سیستم کش یا حافظه نهان استفاده می شود.  ایده اصلی این رهیافت هم این است که بعد از تبدیل صفحه به کد اچ تی ام ال یک کپی از آن جایی ذخیره کنیم تا با درخواست مجدد آن صفحه، به جای پردازش مجدد تنها صفحه آماده شده مرحله قبل را به کاربر نمایش دهیم. فقط باید حواسمان به بازه کش یا همان زمانی که بعد از آن صفحه دوباره باید پردازش شود، باشد چون ممکن است در آن فاصله مطلب جدیدی به صفحه اضافه شده باشد و ما نسخه قبلی صفحه را به کاربر ارسال کنیم.  در هرصورت سیستمهای مدیریت محتوا به طور خودکار این قابلیت را دارند و کافیست آنرا فعال کنید اما اگر سیستمی را خودتان نوشته اید و یا مایلید با منطق پشت این رهیافت آشنا شوید، قطعه کدی را که برای این منظور نوشته شده است ، در اینجا با هم مرور می کنیم :   01.&lt;?php  02.// تعیین نام و مسیر فایل کش تولیدی  03.$cachefile = 'cached-files/'.date('M-d-Y').'.php';  04.// تعیین بازه زمانی کش به ثانیه - در این مثال 5 ساعت منظور شده است .  05.$cachetime = 18000;  06.// بررسی اینکه فایل کش این صفحه موجود است و زمان ایجاد آن از نسبت به زمان جاری از 5 ساعت کمتراست  07.if (file_exists($cachefile) &amp;&amp; time() - $cachetime &lt; filemtime($cachefile)) {  08. include($cachefile);  09.exit;  10.}  11.// اگر فایل کش موجود نبود یا قدیمی بود صفحه را پردازش میکنیم. دستورزیر خروجی را بافر می کند  12.ob_start();  13.?&gt;  14.<html>  15. کدهای اچ تی ام ال صفحه در این قسمت قرار می گیرند.  16.</html>  17.&lt;?php  18.// صفحه تولید شده در بافر را در فایل کش ذخیره می کنیم  19.$fp = fopen($cachefile, 'w');  20.fwrite($fp, ob_get_contents());  21.fclose($fp);  22.// finally send browser output  23.ob_end_flush();  24.?&gt;</p></p>
        </div>
		<div class="animate-box" data-animate-effect="fadeInLeft">
            <div>

			<h3 style='direction:ltr'> <i class="icon-speech-bubble"></i> Comments</h3>
		 
		    <div id="replybox"></div>

    </div>

        </div>
    </div>

<div class="fh5co-footer" >
   
    <p> طراحی و توسعه با موتور تولید محتوای استاتیک </span> <span> <a href="https://blog.getpelican.com/" target="_blank">پلیکان</a></span>
  </p>

</div>                 
        </div>
    </div>

    <!-- jQuery -->
    <script src="http://banaie.ir/theme/js/jquery.min.js"></script>
    <!-- jQuery Easing -->
    <script src="http://banaie.ir/theme/js/jquery.easing.1.3.js"></script>
    <!-- Bootstrap -->
    <script src="http://banaie.ir/theme/js/bootstrap.min.js"></script>
    <!-- Waypoints -->
    <script src="http://banaie.ir/theme/js/jquery.waypoints.min.js"></script>
		
	

    <!-- MAIN JS -->
    <script src="http://banaie.ir/theme/js/main.js"></script>
	<script>
        $(document).ready(function() {
             $('#tipue_search_input').tipuesearch({
                  'mode': 'json',
                  'contentLocation': 'tipuesearch_content.json'
             });
			$( "searchform" ).submit(function( event ) {
			var search = document.getElementById("tipue_search_input");
            search.value = search.value.replace(/^\s*|\s*$/g, ""); //trim string of ending and beginning whitespace
            if(search.value.indexOf(" ") != -1){ //if more then one word
                search.value = search.value.replace(/^"*|"*$/g, "\"");	
			return;
			}
		          
		});
		
		});
   

    </script>
    <script>
            window.replybox = {
                site: 'JOGB5NeRop', 
            };
    </script>
    <script src="https://cdn.getreplybox.com/js/embed.js"></script>
    </body>
</html>
