
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
     <!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-13075446-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-13075446-1');
</script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>نرم افزارهای مدیریت صف توزیع شده یک ابزار مناسب برای پیاده سازی برنامه های توزیع شده</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="author" content="مجتبی بنائی" />
    <meta name="description" content="نرم افزارهای مدیریت صف توزیع شده یک ابزار مناسب برای پیاده سازی برنامه های توزیع شده" />
    <meta name="keywords" content="تخصصی‌نرم‌افزار, RabbitMQ, تجربیات, تخصصی, کافکا">
<!-- Facebook and Twitter integration -->
<meta property="og:site_name" content="سایت شخصی سید مجتبی بنائی"/>
<meta property="og:title" content="نرم افزارهای مدیریت صف توزیع شده یک ابزار مناسب برای پیاده سازی برنامه های توزیع شده"/>
<meta property="og:description" content="نرم افزارهای مدیریت صف توزیع شده یک ابزار مناسب برای پیاده سازی برنامه های توزیع شده"/>
<meta property="og:url" content="http://banaie.ir/blog/2014/08/نرم-افزارهای-مدیریت-صف-توزیع-شده-یک-ابزار-مناسب-برای-پیاده-سازی-برنامه-های-توزیع-شده.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2014-08-30 00:00:00+04:30"/>
<meta property="article:modified_time" content="2018-08-01 00:00:00+04:30"/>
<meta property="article:author" content="http://banaie.ir/author/mjtby-bnyy.html">
<meta property="article:section" content="تخصصی"/>
    <meta property="article:tag" content="تخصصی‌نرم‌افزار"/>
    <meta property="article:tag" content="RabbitMQ"/>
    <meta property="article:tag" content="تجربیات"/>
    <meta property="article:tag" content="تخصصی"/>
    <meta property="article:tag" content="کافکا"/>
    <meta property="og:image" content="http://banaie.ir//images/static/diary.jpg">

    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700" rel="stylesheet">

    <!-- Animate.css -->
    <link rel="stylesheet" href="http://banaie.ir/theme/css/animate.css">
    <!-- Icomoon Icon Fonts-->
    <link rel="stylesheet" href="http://banaie.ir/theme/css/icomoon.css">
    <!-- Bootstrap  -->
    <link rel="stylesheet" href="http://banaie.ir/theme/css/bootstrap.css">
    <!-- Flexslider  -->
    <link rel="stylesheet" href="http://banaie.ir/theme/css/flexslider.css">
    <!-- Theme style  -->
    <link rel="stylesheet" href="http://banaie.ir/theme/css/style.css">
    <!-- Custom style  -->
    <link rel="stylesheet" href="http://banaie.ir/theme/css/custom.css">
    <!-- pygments code highlight -->
    <link rel="stylesheet" href="http://banaie.ir/theme/css/pygments.css">
    <!-- tipue search -->
    <link rel="stylesheet" href="http://banaie.ir/theme/tipuesearch/css/tipuesearch.css">

    <!-- Modernizr JS -->
    <script src="http://banaie.ir/theme/js/modernizr-2.6.2.min.js"></script>
    <!-- FOR IE9 below -->
    <!--[if lt IE 9]>
    <script src="/theme/js/respond.min.js"></script>
    <![endif]-->
        <link href="http://banaie.ir/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="سایت شخصی سید مجتبی بنائی Atom">



    </head>
    <body>
	<!-- Google Tag Manager (noscript) -->
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TZP883X"
	height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<!-- End Google Tag Manager (noscript) -->
    <div id="fh5co-page">
        <a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle"><i></i></a>
        <aside id="fh5co-aside" role="complementary" class="border js-fullheight">

            <nav class="fh5co-main-menu" role="navigation">
    <ul class="language-navigation">
        <li>
                <a class="lang-active" href="http://banaie.ir/">fa</a>
                <a href="http://banaie.ir/en/">en</a>
        </li>
    </ul>
            </nav>
            <div class="clearfix"></div>
            <h1  id="fh5co-logo">
                <a href="http://banaie.ir/index.html">
                    <img src="/images/logo.jpg" />
                </a>
            </h1>
            <nav class="fh5co-main-menu" role="navigation">
<ul>
    <!-- home link -->
    <li><a href="http://banaie.ir/">Home</a></li>

    <!-- page links -->
            <li><a href="http://banaie.ir/pages/درباره-من.html">درباره من</a></li>

    <!-- categories -->
        <li><a href="http://banaie.ir/categories.html">Categories</a></li>

    <!-- tags -->
        <li><a href="http://banaie.ir/tags.html">Tags</a></li>

    <!-- additional menu items from config -->
        <!-- <li class="nav-title">Misc</li> -->
            <li><a href="http://banaie.ir/archives.html">Archive</a></li>
            <li><a href="http://banaie.ir/contact.html">Contact</a></li>

</ul><ul><li><form id="searchform" action="http://banaie.ir/search.html">
    <input id="tipue_search_input" data-siteurl="http://banaie.ir" type="text" size="60" class="form-control search-field" name="q">

    <button type="submit" class="btn btn-primary search-submit"><i class="icon-search4"></i></button>
</form></li></ul>

            </nav>

<ul id="social">
            <li><a href="https://www.github.com/smbanaie" alt="Github"><i class="icon-github"></i></a></li>

            <li><a href="https://www.facebook.com/smbanaie" alt="Facebook"><i class="icon-facebook2"></i></a></li>

            <li><a href="https://www.twitter.com/smbanaie" alt="Twitter"><i class="icon-twitter2"></i></a></li>

            <li><a href="https://www.linkedin.com/in/smbanaie/" alt="Linkedin"><i class="icon-linkedin2"></i></a></li>

</ul>
        </aside>

        <div id="fh5co-main">

    <div class="fh5co-narrow-content article-content">
        <h1 class="fh5co-heading-colored">نرم افزارهای مدیریت صف توزیع شده یک ابزار مناسب برای پیاده سازی برنامه های توزیع شده</h1>

        <div>by
                <a href="author/mjtby-bnyy.html">مجتبی بنائی</a> - شنبه 08 شهریور 1393
        - گروه : تخصصی - مشاهده : 4</div>
        <div>
        
        </div>
            <div><span>برچسب‌ها: </span>
                    <span><a href="http://banaie.ir/tag/tkhssynrmfzr.html">#تخصصی‌نرم‌افزار</a> </span>
                    <span><a href="http://banaie.ir/tag/rabbitmq.html">#RabbitMQ</a> </span>
                    <span><a href="http://banaie.ir/tag/tjrbyt.html">#تجربیات</a> </span>
                    <span><a href="http://banaie.ir/tag/tkhssy.html">#تخصصی</a> </span>
                    <span><a href="http://banaie.ir/tag/khfkh.html">#کافکا</a> </span>
            </div>

        <div class="animate-box" data-animate-effect="fadeInLeft">
            <p class="animate-box" data-animate-effect="fadeInLeft"><p>s: RabbitMQ | تجربیات | تخصصی | کافکا از سال گذشته که درگیر یک پروژه بین المللی در زمینه خواندن اخبار و بررسی محبوبیت هر خبر در شبکه های اجتماعی هستم تا امروز که چند روزی بیشتر به راه افتادن نسخه اول این سایت نمانده است، برای بخش پشت صحنه (Backend) که پیوسته باید سایت های خبری تمام خبرگزاریهای مطرح دنیا در تمام کشورها را چک کند (در حال حاضر ۵۴ کشور) و در کمتر از چند دقیقه اخبار جدید منتشر شده را به بانکهای  اطلاعاتی ما منتقل کند، سه پیاده سازی مختلف داشته ایم . تعداد بالای خبرگزاری ها و خواندن لحظه ای تمام اخبار به زبانهای مختلف، چالش بزرگ ما در این یکسال بوده است که چگونه با منابع محدود بتوانیم این کار را انجام دهیم .  در روش اول از دیتابیس ردیس به عنوان صف مشترک بین سرورهای مختلف  استفاده کردیم و هر برنامه خبرخوان از سر صف چندین خبرگزاری را انتخاب می کرد و شروع به بررسی اخبار و پیدا کردن اخبار جدید و ارسال آنها به صفهای آمارگیری شبکه های اجتماعی می کرد .  در این روش،‌الگوریتم ما قابلیت توزیع در شبکه را به راحتی داشت فقط کافی بود دیتابیس ردیس را در یک سرور جدید به اشتراک می گذاشتیم و خبرخوان ها به تعداد لازم کارشان را انجام میدادند .مشکلی که در این روش داشتیم ، نحوه مدیریت دسترسی همزمان برنامه ها به صف و توزیع عادلانه خبرگزاری ها بین آنها بود که با دانش اولیه اندک ما راه حل مناسبی برای آن پیدا نکردیم .  در رهیافت بعدی ، مدیریت خبرخوان ها را خودمان بر عهده گرفتیم و توزیع خبرگزاری ها را بین این خبرخوان ها با کمک دیتابیس مانگو به گونه ای انجام دادیم که هر خبرخوان تعداد مشخصی خبرگزاری را بر عهده بگیرد به طوری که حداکثر تا سه دقیقه تمام خبرگزاری ها بررسی شوند و اگر یک خبرخوان کند عمل می کرد، تعدادی از خبرگزاریهای آنرا جدا کرده به یک خبرخوان جدید می دادیم.  این الگوریتم در محیط تست و با تعداد کم خبرگزاریها،‌بسیار خوب عمل کرد که این امر باعث شد حواسمون به مقیاس پذیری الگوریتم نباشد اینکه بتوانیم به راحتی تعداد خبرگزاری ها یا تعداد سرورها را افزایش دهیم یا زمان مورد نظر برای سرعت خواندن اخبار جدید را  جابجا کنیم . مثلا یکی از مشکلاتی که گریبانگیر ما شد این بود که تعداد خبرگزاری ها که زیاد شد ، الگوریتم ما تعداد زیادی پروسس در لینوکس به عنوان خبر خوان ایجاد می کرد که این تعداد زیاد باعث افزایش زمان انتظار هر برنامه میشد که خود برنامه مدیریت توزیع‌ را مجبور می کرد برای دفعه بعد تعداد خبرخوان ها را بیشتر و تعداد خبرگزاری های هر یک را کم کند که این امر باز اوضاع را بدتر می کرد. نهایتا به جای سه دقیقه به بیست دقیقه در خواندن اخبار جدید بسنده کردیم .  این بود که در سومین تلاش با ایده گرفتن از روش اول ، به دنبال  یک صف توزیع شده بودیم که به راحتی بین تعداد زیادی سیستم توزیع شود و مدیریت توزیع خبرگزاریها بین خبرخوان ها در شبکه را خودش برعهده بگیرد و اگر پیامی (یا یک خبرگزاری) پردازش نشد، به طور خودکار به خبرخوان دیگری ارسال شود و کارهایی ازاین قبیل که در تلاش دوم خودمان انجام داده بودیم و اکنون دنبال یک راه حل آماده و آزمایش شده بودیم .  قبلا کافکا را به عنوان یک صف توزیع شده استفاده کرده بودیم که ما را اذیت کرده بود، این سری با خواندن تجربیات سایت Indix که کاری مشابه ما را انجام میداد، به سراغ صف توزیع شده RabbitMQ رفتم که بسیار خوب عمل کرد و کد نویسی ساده ای داشت در عین اینکه کل مدیریت عادلانه وحرفه ای توزیع پیام های صف (صف ما در اینجا لیست خبرگزاریهای آماده پردازش بود) را بین شبکه بر عهده گرفت و تنها وظیفه ما پرکردن این صف در بازه های زمانی معین و خواندن یک پیام از صف و پردازش آن با تعداد ثابتی خبرخوان در هر سرور بود که تا امروز بدون مشکل و مطابق با نیازهای ما عمل کرده است .  خلاصه کلام اینکه برای طراحی یک الگوریتم که بتواند مقیاس پذیر باشد و در یک شبکه بزرگ هم به خوبی عمل کند ،‌نیاز به ابزارهای توزیع خودکار در شبکه داریم که صفهای توزیع شده امروزه این بستر را برای ما فراهم کرده اند که به جای تمرکز روی مباحث شبکه  و ارسال و توزیع پیام ، تنها پردازش پیام ها فکر کنیم و نگران مسایل دیگر نباشیم .  البته سیستم های مدیریت فایل توزیع شده مانند HDFS‌ که ذخیره فایلها را هم به صورت خودکار و بدون دخالت ما در کل شبکه توزیع می کند ، هم می تواند در بعضی کاربردها مفید واقع شو د.</p></p>
        </div>
		<div class="animate-box" data-animate-effect="fadeInLeft">
            <div>

			<h3 style='direction:ltr'> <i class="icon-speech-bubble"></i> Comments</h3>
		 
		    <div id="replybox"></div>

    </div>

        </div>
    </div>

<div class="fh5co-footer" >
   
    <p> طراحی و توسعه با موتور تولید محتوای استاتیک </span> <span> <a href="https://blog.getpelican.com/" target="_blank">پلیکان</a></span>
  </p>

</div>                 
        </div>
    </div>

    <!-- jQuery -->
    <script src="http://banaie.ir/theme/js/jquery.min.js"></script>
    <!-- jQuery Easing -->
    <script src="http://banaie.ir/theme/js/jquery.easing.1.3.js"></script>
    <!-- Bootstrap -->
    <script src="http://banaie.ir/theme/js/bootstrap.min.js"></script>
    <!-- Waypoints -->
    <script src="http://banaie.ir/theme/js/jquery.waypoints.min.js"></script>
		
	

    <!-- MAIN JS -->
    <script src="http://banaie.ir/theme/js/main.js"></script>
	<script>
        $(document).ready(function() {
             $('#tipue_search_input').tipuesearch({
                  'mode': 'json',
                  'contentLocation': 'tipuesearch_content.json'
             });
			$( "searchform" ).submit(function( event ) {
			var search = document.getElementById("tipue_search_input");
            search.value = search.value.replace(/^\s*|\s*$/g, ""); //trim string of ending and beginning whitespace
            if(search.value.indexOf(" ") != -1){ //if more then one word
                search.value = search.value.replace(/^"*|"*$/g, "\"");	
			return;
			}
		          
		});
		
		});
   

    </script>
    <script>
            window.replybox = {
                site: 'JOGB5NeRop', 
            };
    </script>
    <script src="https://cdn.getreplybox.com/js/embed.js"></script>
    </body>
</html>
