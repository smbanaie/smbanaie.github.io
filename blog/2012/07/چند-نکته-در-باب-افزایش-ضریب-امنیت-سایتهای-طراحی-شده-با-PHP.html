
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
     <!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-13075446-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-13075446-1');
</script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>چند نکته در باب افزایش ضریب امنیت سایتهای طراحی شده با PHP</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="author" content="مجتبی بنائی" />
    <meta name="description" content="چند نکته در باب افزایش ضریب امنیت سایتهای طراحی شده با PHP" />
    <meta name="keywords" content="تخصصی‌نرم‌افزار, امنیت, تجربیات, تخصصی, وب">
<!-- Facebook and Twitter integration -->
<meta property="og:site_name" content="سایت شخصی سید مجتبی بنائی"/>
<meta property="og:title" content="چند نکته در باب افزایش ضریب امنیت سایتهای طراحی شده با PHP"/>
<meta property="og:description" content="چند نکته در باب افزایش ضریب امنیت سایتهای طراحی شده با PHP"/>
<meta property="og:url" content="http://banaie.ir/blog/2012/07/چند-نکته-در-باب-افزایش-ضریب-امنیت-سایتهای-طراحی-شده-با-PHP.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2012-07-08 00:00:00+04:30"/>
<meta property="article:modified_time" content="2018-08-01 00:00:00+04:30"/>
<meta property="article:author" content="http://banaie.ir/author/mjtby-bnyy.html">
<meta property="article:section" content="روزنوشت"/>
    <meta property="article:tag" content="تخصصی‌نرم‌افزار"/>
    <meta property="article:tag" content="امنیت"/>
    <meta property="article:tag" content="تجربیات"/>
    <meta property="article:tag" content="تخصصی"/>
    <meta property="article:tag" content="وب"/>
    <meta property="og:image" content="http://banaie.ir//images/static/diary.jpg">

    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700" rel="stylesheet">

    <!-- Animate.css -->
    <link rel="stylesheet" href="http://banaie.ir/theme/css/animate.css">
    <!-- Icomoon Icon Fonts-->
    <link rel="stylesheet" href="http://banaie.ir/theme/css/icomoon.css">
    <!-- Bootstrap  -->
    <link rel="stylesheet" href="http://banaie.ir/theme/css/bootstrap.css">
    <!-- Flexslider  -->
    <link rel="stylesheet" href="http://banaie.ir/theme/css/flexslider.css">
    <!-- Theme style  -->
    <link rel="stylesheet" href="http://banaie.ir/theme/css/style.css">
    <!-- Custom style  -->
    <link rel="stylesheet" href="http://banaie.ir/theme/css/custom.css">
    <!-- pygments code highlight -->
    <link rel="stylesheet" href="http://banaie.ir/theme/css/pygments.css">
    <!-- tipue search -->
    <link rel="stylesheet" href="http://banaie.ir/theme/tipuesearch/css/tipuesearch.css">

    <!-- Modernizr JS -->
    <script src="http://banaie.ir/theme/js/modernizr-2.6.2.min.js"></script>
    <!-- FOR IE9 below -->
    <!--[if lt IE 9]>
    <script src="/theme/js/respond.min.js"></script>
    <![endif]-->
        <link href="http://banaie.ir/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="سایت شخصی سید مجتبی بنائی Atom">



    </head>
    <body>
	<!-- Google Tag Manager (noscript) -->
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TZP883X"
	height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<!-- End Google Tag Manager (noscript) -->
    <div id="fh5co-page">
        <a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle"><i></i></a>
        <aside id="fh5co-aside" role="complementary" class="border js-fullheight">

            <nav class="fh5co-main-menu" role="navigation">
    <ul class="language-navigation">
        <li>
                <a class="lang-active" href="http://banaie.ir/">fa</a>
                <a href="http://banaie.ir/en/">en</a>
        </li>
    </ul>
            </nav>
            <div class="clearfix"></div>
            <h1  id="fh5co-logo">
                <a href="http://banaie.ir/index.html">
                    <img src="/images/logo.jpg" />
                </a>
            </h1>
            <nav class="fh5co-main-menu" role="navigation">
<ul>
    <!-- home link -->
    <li><a href="http://banaie.ir/">Home</a></li>

    <!-- page links -->
            <li><a href="http://banaie.ir/pages/درباره-من.html">درباره من</a></li>

    <!-- categories -->
        <li><a href="http://banaie.ir/categories.html">Categories</a></li>

    <!-- tags -->
        <li><a href="http://banaie.ir/tags.html">Tags</a></li>

    <!-- additional menu items from config -->
        <!-- <li class="nav-title">Misc</li> -->
            <li><a href="http://banaie.ir/archives.html">Archive</a></li>
            <li><a href="http://banaie.ir/contact.html">Contact</a></li>

</ul><ul><li><form id="searchform" action="http://banaie.ir/search.html">
    <input id="tipue_search_input" data-siteurl="http://banaie.ir" type="text" size="60" class="form-control search-field" name="q">

    <button type="submit" class="btn btn-primary search-submit"><i class="icon-search4"></i></button>
</form></li></ul>

            </nav>

<ul id="social">
            <li><a href="https://www.github.com/smbanaie" alt="Github"><i class="icon-github"></i></a></li>

            <li><a href="https://www.facebook.com/smbanaie" alt="Facebook"><i class="icon-facebook2"></i></a></li>

            <li><a href="https://www.twitter.com/smbanaie" alt="Twitter"><i class="icon-twitter2"></i></a></li>

            <li><a href="https://www.linkedin.com/in/smbanaie/" alt="Linkedin"><i class="icon-linkedin2"></i></a></li>

</ul>
        </aside>

        <div id="fh5co-main">

    <div class="fh5co-narrow-content article-content">
        <h1 class="fh5co-heading-colored">چند نکته در باب افزایش ضریب امنیت سایتهای طراحی شده با PHP</h1>

        <div>by
                <a href="author/mjtby-bnyy.html">مجتبی بنائی</a> - یکشنبه 18 تیر 1391
        - گروه : روزنوشت - مشاهده : 3</div>
        <div>
        
        </div>
            <div><span>برچسب‌ها: </span>
                    <span><a href="http://banaie.ir/tag/tkhssynrmfzr.html">#تخصصی‌نرم‌افزار</a> </span>
                    <span><a href="http://banaie.ir/tag/mnyt.html">#امنیت</a> </span>
                    <span><a href="http://banaie.ir/tag/tjrbyt.html">#تجربیات</a> </span>
                    <span><a href="http://banaie.ir/tag/tkhssy.html">#تخصصی</a> </span>
                    <span><a href="http://banaie.ir/tag/wb.html">#وب</a> </span>
            </div>

        <div class="animate-box" data-animate-effect="fadeInLeft">
            <p class="animate-box" data-animate-effect="fadeInLeft"><p>s: امنیت | تجربیات | تخصصی | وب امروزه پي اچ پي در حوزه طراحي وب جزء رايجترين ها محسوب مي شود و از آنجا که اين زبان برنامه نويسي يک زبان اسکريپتي است (زباني که مستقيماً اجرا نمي شود) ،اگر برنامه نويسان آن تجربه کافي نداشته باشند، حفره هاي گوناگون امنيتي مي تواند آنرا نفوذپذير کند.  در زير چند نکته براي افزايش سايتهايي که از پي اچ پي استفاده مي کنند پيشنهاد مي شود :   استفاده از قابليت نمايش خطا   معمولاً هنگام توليد برنامه ، خاصيت Error_Reporting آنرا غيرفعال کرده و يا سطح امنيتي آنرا پائين مي آوريم که يکسره به هشدار و خطاهاي جزئي نمايش داده نشود . اما تنظيم درست اين خاصيت در فايل php.ini  مي تواند مشکلات امنيتي آنرا قبل از عملياتي شدن به ما نمايش دهد. حداقل اينکه پس از اتمام فاز برنامه نويسي ، نمايش خطاها را به صورت کامل فعال مي کنيم ( error_reporting = E_ERROR &amp; E_WARNING &amp; E_PARSE &amp; E_NOTICE ) و بعد برنامه را دوباره تست کرده، خطاهاي احتمالي را مجدداً رفع و رجوع مي کنيم. مقادير مختلف اين قابليت در خود فايل php.ini بيان شده است.  اگر سرور متعلق به خودتان نيست و امکان تغيير در فايل php.ini را نداريد از فايل .htaccess (فايلي در پوشه اصلي سايت براي تنظيمات سرور با دسترسي کاربر)استفاده کنيد  و با اضافه کردن اين دستور به فايل فوق ، مشکل را حل کنيد :    php_value error_reporting 7     غيرفعالسازي قابليت هاي بالقوه      خطرناک   برخي از قابليت هاي تعبيه شده در پي اچ پي، مي توانند ضريب امنيت سايت شما را کاهش دهند و بهتر است از آنها يا استفاده نکنيد و يا کلاً آنها را غير فعال کنيد. از جمله اين قابليت ها مي توان به اين چند مورد اشاره کرد :   Register Globals   يکي از امکاناتي که براي راحتي برنامه نويس در پي اچ پي تعبيه شده است قابليت عمومي کردن متغيرهاي ارسالي فرمهاست که با دستور register_globals=On در فايل php.ini فعال مي شود با فعال شدن اين قابليت تمام متغيرهاي POST,Get,COOKIE,SERVER,... به صورت عمومي در مي آيند و به جاي نوشتن $_POST['name'] کافيست عبارت $name را به کار بريم. اين امر نوشتن برنامه ها را ساده تر مي کند اما باعث ايجاد رخنه هاي امنيتي در سيستم مي شود . مثلا کد زير را در نظر بگيريد :   i f( !empty( $_POST['username'] ) &amp;&amp; $_POST['username'] == ‘test123? &amp;&amp; !empty( $_POST['password'] ) &amp;&amp; $_POST['password'] == “pass123? )  {  $access = 1;  }  حال اگر کاربر به انتهاي آدرس صفحه جاري عبارت access=1 را به صورت دستي اضافه کند، از آنجا که اين متغير به صورت عمومي به سرور ارسال مي شود ، سمت سرور خواهيم داشت $access  =  1 و کاربر خواهد توانست به سيستم بدون داشتن رمز عبور وارد شود.  اگر سرور متعلق به خودتان نيست و امکان تغيير در فايل php.ini را نداريد از فايل .htaccess استفاده کنيد و با اضافه کردن اين دستور به فايل فوق ، مشکل را حل کنيد :  php_flag register_globals  0     Magic Quotes   براي نمايش گيومه (تکي و دوتايي ) به کاربر معمولاً از علامت \ قبل از گيومه استفاده مي کنيم . حال اگر در برنامه به اين کار زياد نياز داشته باشيم، از " گيومه هاي جادويي " که در پي اچ پي به اين منظور تعبيه شده اند استفاده مي کنيم تا کار برنامه نويسي را راحت کنند اما اين قابليت هم نفوذپذيري سايت را بالا مي برد و بهتر است غير فعال شود :   Disabling with .htaccess  php_flag magic_quotes_gpc 0  php_flag magic_quotes_runtime 0  Disabling with php.ini  magic_quotes_gpc = Off  magic_quotes_runtime = Off  magic_quotes_sybase = Off     بررسي ورودي هاي کاربر   از آنجا که مي دانيد براي هر کدام از فيلدهاي فرم ، چه نوع داده هايي مجاز هستند، کاري کنيد که کاربر داده غير مجاز اصلاً نتواند وارد کند. (به کمک جاوا اسکريپت و نيز هنگام پردازش داده )   عدم پذيرش کدهاي HTML در ورودي فرم ها   تا جاييکه امکان دارد اجازه ندهيد کاربر کد HTML به عنوان ورودي فرم وارد کند چون اين امر باعث مي شود يک هکر با ارسال کدهاي جاوااسکريپت از اين طريق ، سايت شما را مورد حمله قرار دهد و به آن نفوذ کند. ( Cross Site Scripting Attacks )   محافظت از بانک      اطلاعاتي و جلوگيري از تزريق SQL   اگر ورودي کاربر را مستقيماً به بانک اطلاعاتي ارسال کنيد، باعث مي شويد هکر محترم با افزودن کدهايي به ورودي ، به راحتي به بانک اطلاعاتي شما نفوذ کند و يا اقدامات امنيتي شما را دور بزند.  براي مثال فرض کنيد شما در برنامه خود کد زير را نوشته ايد  mysql_query( “SELECT * FROM tbl_employee WHERE username = '".$GET['username']."' "  حال اگر کاربر به جاي نام کاربري عبارت  Ali  or 1=1  را وارد کند نتيجه شرط sql همواره درست خواهد بود و کاربر به راحتي وارد سايت شما خواهد شد . براي حل اين مشکل کافيست قبل از ارسال داده هاي فرم به بانک اطلاعاتي ، از شکل صحيح ورود آنها مطمئن شويد مثلاً اين کد را به کار بريد :  $username = mysqli_real_escape_string( $GET['username'] );  mysql_query( “SELECT * FROM tbl_employee WHERE username = '".$username."' " ;  فهرست فوق تنها نکات اصلي امنيتي در پي اچ پي است و مطمئناً نکات امنيتي که بايد به عنوان برنامه نويس پي اچ پي رعايت کنيد بسيار بيشتر از فهرست فوق است .</p></p>
        </div>
		<div class="animate-box" data-animate-effect="fadeInLeft">
            <div>

			<h3 style='direction:ltr'> <i class="icon-speech-bubble"></i> Comments</h3>
		 
		    <div id="replybox"></div>

    </div>

        </div>
    </div>

<div class="fh5co-footer" >
   
    <p> طراحی و توسعه با موتور تولید محتوای استاتیک </span> <span> <a href="https://blog.getpelican.com/" target="_blank">پلیکان</a></span>
  </p>

</div>                 
        </div>
    </div>

    <!-- jQuery -->
    <script src="http://banaie.ir/theme/js/jquery.min.js"></script>
    <!-- jQuery Easing -->
    <script src="http://banaie.ir/theme/js/jquery.easing.1.3.js"></script>
    <!-- Bootstrap -->
    <script src="http://banaie.ir/theme/js/bootstrap.min.js"></script>
    <!-- Waypoints -->
    <script src="http://banaie.ir/theme/js/jquery.waypoints.min.js"></script>
		
	

    <!-- MAIN JS -->
    <script src="http://banaie.ir/theme/js/main.js"></script>
	<script>
        $(document).ready(function() {
             $('#tipue_search_input').tipuesearch({
                  'mode': 'json',
                  'contentLocation': 'tipuesearch_content.json'
             });
			$( "searchform" ).submit(function( event ) {
			var search = document.getElementById("tipue_search_input");
            search.value = search.value.replace(/^\s*|\s*$/g, ""); //trim string of ending and beginning whitespace
            if(search.value.indexOf(" ") != -1){ //if more then one word
                search.value = search.value.replace(/^"*|"*$/g, "\"");	
			return;
			}
		          
		});
		
		});
   

    </script>
    <script>
            window.replybox = {
                site: 'JOGB5NeRop', 
            };
    </script>
    <script src="https://cdn.getreplybox.com/js/embed.js"></script>
    </body>
</html>
